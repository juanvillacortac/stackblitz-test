<!-- <p-panel> -->
<!-- <ng-template pTemplate="header">
        <span class="panelheader">Datos generales</span>
    </ng-template> -->
<div class="p-grid area-padding">
    <!--Datos generales-->
    <div class="p-col-12 p-md-6 p-lg-4 p-fluid">
            <div style="height: 100%;" class="p-grid pb-3">
                <p-card header="Datos generales" styleClass="p-card-shadow" class="p-col-12 p-fluid fullheightcard">
                    <div class="p-grid p-align-center vertical-container p-p-3 p-fluid p-formgrid">
                        <div class="p-col-12 p-mb-2 p-fluid">
                            <label>Usuario responsable</label>
                            <div class="p-inputgroup">
                                <input type="text" pInputText placeholder="Usuario responsable" (keyup.enter)="Save()"
                                    [(ngModel)]="this.operatormodal.namesoperators" disabled>
                                <!-- <p-button icon="pi pi-search" class="button-radius" [ngStyle]="{'border-radius:': '4px 0px 0px 4px' }" (click)="OperatorDialogVisible=true"></p-button> -->
                            </div>
                        </div>

                        <div class="p-col-12 p-mb-2">
                            <label>Autorizado por</label>
                            <div class="p-inputgroup">
                                <input type="text" pInputText placeholder="Autorizada por"
                                    [(ngModel)]="this.operator.namesoperators" (keyup.enter)="Save()" disabled>
                                <!-- (click)="OperatorDialogVisible=true" -->
                                <p-button *ngIf="PucharseOrderHeader.purchase.idStatus==statuspurchase.Eraser || PucharseOrderHeader.purchase.idStatus==statuspurchase.New" visible icon="pi pi-search" (click)="AuthorizesDialogVisible=true"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue "
                                    class="button-radius" [ngStyle]="{'border-radius:': '4px 0px 0px 4px' }"></p-button>
                            </div>
                        </div>
                        <div class="p-col-12 p-mb-2 p-fluid">
                            <label>Tipo de OC <span [ngStyle]="{'color':'red'}">*</span></label>
                            <!-- -->
                            <p-dropdown [options]="typeOClist" appendTo="body"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idDocumentOC" placeholder="Seleccione..."
                                (keyup.enter)="Save()" (onChange)="changEdit()" [filter]="true" emptyFilterMessage="Sin resultados.">
                            </p-dropdown>
                            <small class="p-invalid"
                                *ngIf="submitted && (this.PucharseOrderHeader.purchase.idDocumentOC==-1)">El Tipo de OC
                                es
                                requerida.</small>
                        </div>
                        <!-- [(ngModel)]="iDate" (onSelect)="onBlurMethod($event)"-->
                        <div class="p-col-12 p-mb-2 p-fluid" pTooltip="Fecha vencimiento" tooltipPosition="left"
                            life="500">
                            <label>Fecha de vencimiento</label>
                            <p-calendar id="ToD" dateFormat="dd/mm/yy"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.expiredDate" (keyup.enter)="Save()"
                                readonlyInput="true" [showIcon]="true"
                                [minDate]="this.dateexpired"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue " 
                                (onSelect)="changEditdate($event)">
                            </p-calendar>
                        </div>
                        <div class="p-col-12 p-mb-2 p-fluid">
                            <label>Tipo de distribución <span [ngStyle]="{'color':'red'}">*</span></label>
                            <!--  -->
                            <p-dropdown placeholder="Seleccione..." [options]="typeDistributionList"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue
                                            ||PucharseOrderHeader.purchase.indSimple ||PucharseOrderHeader.idGroupStatus == 3 "
                                (onChange)="ChangeTypeDistribution()"
                                [(ngModel)]="PucharseOrderHeader.idTypeDistribution" appendTo="body"
                                (keyup.enter)="Save()" emptyMessage="Sin resultados." [filter]="true"
                                emptyFilterMessage="Sin resultados.">
                            </p-dropdown>
                            <small class="p-invalid"
                                *ngIf="submitted && (this.PucharseOrderHeader.idTypeDistribution==-1)">El Tipo de
                                distribución es
                                requerida.</small>
                                <small class="p-invalid"
                                *ngIf="PucharseOrderHeader.purchase.indSimple">Esta orden de compra simple pertenece a una distribuida.</small>
                        </div>
                    </div>
                </p-card>
            </div>


    </div>
    <!--  Terminos de entrega -->

    <div class="p-col-12 p-md-6 p-lg-8 p-fluid">
        <div class="card-body my-2">
            <div class="p-grid pb-3">
                <p-card header="Términos de entrega" styleClass="p-card-shadow" class="p-col-12 p-fluid fullheightcard">
                    <div class="p-grid p-align-center vertical-container p-p-3 p-fluid p-formgrid">
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid" pTooltip="Fecha de entrega estimada"
                            tooltipPosition="right" life="500">
                            <label>Fecha de entrega estimada</label>
                            <p-calendar id="ToD" dateFormat="dd/mm/yy"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.deliveryDate"
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue "
                                (keyup.enter)="Save()" readonlyInput="true" [showIcon]="true"
                                [minDate]="this.PucharseOrderHeader.purchase.createdDate"
                                [maxDate]="this.PucharseOrderHeader.purchase.expiredDate"
                                (onSelect)="changEditdate($event)">
                            </p-calendar>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Tipo de entrega</label>
                            <p-dropdown [options]="typeDeliveryList" appendTo="body"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue "
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idDeliveryType"
                                (onChange)="evaluarDate(this.PucharseOrderHeader.purchase.idDeliveryType)"
                                (keyup.enter)="Save()"
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated ||PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue "
                                placeholder="Seleccione..." emptyMessage="Sin resultados.">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid" pTooltip="Fecha tope de entrega"
                            tooltipPosition="right" life="500">
                            <label>Fecha tope de entrega</label>
                            <p-calendar [minDate]="this.PucharseOrderHeader.purchase.createdDate"
                                [disabled]="(this.PucharseOrderHeader.purchase.idDeliveryType==-1 || this.PucharseOrderHeader.purchase.idDeliveryType==2 ) || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue "
                                id="ToD" dateFormat="dd/mm/yy"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.deliverydeadline" (keyup.enter)="Save()"
                                readonlyInput="true" [showIcon]="true"
                                [minDate]="this.PucharseOrderHeader.purchase.deliveryDate"
                                [maxDate]="this.PucharseOrderHeader.purchase.expiredDate"
                                (onSelect)="changEditdate($event)">
                            </p-calendar>
                        </div>
                        <!-- [(ngModel)]="iDate" (onSelect)="onBlurMethod($event)"-->
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>País de origen</label>
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [options]="countryList" appendTo="body" [(ngModel)]="this.PucharseOrderHeader.idCountry"
                                (onChange)="onLoadPortOrgin(this.PucharseOrderHeader.idCountry, true)" (keyup.enter)="Save()"
                                placeholder="Seleccione..." emptyMessage="Sin resultados." [filter]="true"
                                emptyFilterMessage="Sin resultados.">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Puerto de origen</label>
                            <!--  -->
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                placeholder="Seleccione..." [options]="portList"
                                [(ngModel)]="this.PucharseOrderHeader.idPort" appendTo="body" (keyup.enter)="Save()"
                                emptyMessage="Sin resultados." [filter]="true" emptyFilterMessage="Sin resultados." (onChange)="changEdit()">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>País destino</label>
                            <p-dropdown [options]="countryList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idCountryRequest" appendTo="body"
                                (keyup.enter)="Save()"
                                (onChange)="onLoadPortDestin(this.PucharseOrderHeader.purchase.idCountryRequest, true)"
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                placeholder="Seleccione..." emptyMessage="Sin resultados." [filter]="true"
                                emptyFilterMessage="Sin resultados.">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Puerto destino</label>
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [options]="portListDestin" [(ngModel)]="this.PucharseOrderHeader.purchase.idPortRequest"
                                appendTo="body" (keyup.enter)="Save()" placeholder="Seleccione..."
                                emptyMessage="Sin resultados." [filter]="true" emptyFilterMessage="Sin resultados." (onChange)="changEdit()">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Sucursal destino <span [ngStyle]="{'color':'red'}">*</span></label>
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue ||   PucharseOrderHeader.idGroupStatus == 3"
                                [options]="branchOfficeList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idBranchRequest" appendTo="body"
                                (keyup.enter)="Save()" placeholder="Seleccione..." emptyMessage="Sin resultados."
                                [filter]="true" emptyFilterMessage="Sin resultados." (onChange)="changEdit()">
                            </p-dropdown>
                            <small class="p-invalid"
                                *ngIf="submitted && (this.PucharseOrderHeader.purchase.idBranchRequest==-1)">La sucursal
                                es requerida.</small>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Forma de entrega</label>
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [options]="formDeliveryList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idDeliveryMethod" appendTo="body"
                                emptyMessage="Sin resultados." (keyup.enter)="Save()" placeholder="Seleccione..." (onChange)="changEdit()" >
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid margin-top-generic">
                            <label>Tipo de transporte</label>
                            <p-dropdown
                                [disabled]="this.operatormodal.namesoperators==''|| PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [options]="transportTypeList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idTypeTransport"
                                emptyMessage="Sin resultados." appendTo="body" (keyup.enter)="Save()"
                                placeholder="Seleccione..." (onChange)="changEdit()">
                            </p-dropdown>
                        </div>
                        <!-- p-col-12 p-md-6 p-lg-8 p-fluid -->
                        <div class="p-col-12 p-md-6 p-lg-8 p-mb-2 p-fluid">
                            <label for="active">Observación</label>
                            <!-- [(ngModel)]="_supplierxprod.description" -->
                            <textarea
                                [disabled]="this.operatormodal.namesoperators=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                pInputTextarea rows="4"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.internalObservation"
                                style="resize: none;" cols="30" pInputTextarea maxlength="500"></textarea>
                        </div>
                    </div>
                </p-card>

            </div>
        </div>
    </div>

    <!-- Proveedor-->
    <div class="p-col-12 p-md-6 p-lg-4 p-fluid">
            <div style="height: 100%;" class="p-grid pb-3">
                <p-card header="Proveedor" styleClass="p-card-shadow" class="p-col-12 p-fluid fullheightcard">
                    <div class="p-grid p-align-center vertical-container p-p-3 p-fluid p-formgrid">
                        <div class="p-col-12 p-fluid p-mb-2">
                            <label>Documento<span [ngStyle]="{'color':'red'}">*</span></label>
                            <div class="p-inputgroup">
                                <input type="text" pInputText placeholder="Proveedor" disabled (keyup.enter)="Save()"
                                    [(ngModel)]="this.suppliermodal.document">
                                <p-button *ngIf="PucharseOrderHeader.purchase.idStatus==statuspurchase.Eraser || PucharseOrderHeader.purchase.idStatus==statuspurchase.New" icon="pi pi-search" class="button-radius"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized"
                                    [ngStyle]="{'border-radius:': '4px 0px 0px 4px'}"
                                    (click)="SupplierDialogVisible=true"
                                    [disabled]="this.operatormodal.namesoperators==''"></p-button>
                            </div>
                            <small class="p-invalid"
                                *ngIf="submitted && (!this.suppliermodal.document || !this.suppliermodal.document.trim())">El
                                proveedor es
                                requerido.</small>
                        </div>
                        <div class="p-col-12 p-mb-2">
                            <label>Razón social</label>
                            <div class="p-inputgroup">
                                <span class="p-float-label">

                                    <input disabled type="text" pInputText placeholder="Razón social"
                                        [(ngModel)]="this.suppliermodal.socialReason" (keyup.enter)="Save()">
                                    <!-- (click)="OperatorDialogVisible=true" -->
                                </span>
                            </div>
                        </div>
                        <div class="p-col-12 p-mb-2 p-fluid" pTooltip="Fecha de despacho" tooltipPosition="left"
                            life="500">
                            <label>Fecha de despacho</label>
                            <p-calendar id="ToD" [minDate]="this.PucharseOrderHeader.purchase.createdDate"
                                dateFormat="dd/mm/yy"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.dispatchDate" (keyup.enter)="Save()"
                                readonlyInput="true" [showIcon]="true"
                                (onSelect)="changEditdate($event)">
                            </p-calendar>
                        </div>
                        <div class="p-col-12 p-mb-2">
                            <label>Contacto</label>
                            <div class="p-inputgroup">
                                <input type="text" pInputText placeholder="Contacto" (keyup.enter)="Save()" disabled
                                    [(ngModel)]="this.contactmodal.contact">
                                <p-button *ngIf="PucharseOrderHeader.purchase.idStatus==statuspurchase.Eraser || PucharseOrderHeader.purchase.idStatus==statuspurchase.New" icon="pi pi-search" class="button-radius"
                                    [ngStyle]="{'border-radius:': '4px 0px 0px 4px'}"
                                    [disabled]="this.suppliermodal.socialReason=='' || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized"
                                    (click)="ContactDialogVisible=true"></p-button>
                                <!-- (click)="OperatorDialogVisible=true" [(ngModel)]="this.operatormodal.namesoperators" -->
                            </div>
                        </div>
                        <div class="p-col-12 p-mb-2 p-fluid">
                            <label for="active">Teléfono de contacto</label>

                            <input type="text" pInputText disabled [(ngModel)]="this.contactmodal.number">
                            <!-- <button type="button" style="background-color: white;color: black;" pButton pRipple icon="pi pi-times"
                                  pTooltip="Borrar Teléfono"></button> -->
                        </div>
                        <div class="p-col-12 p-md-12 p-lg-12 p-mb-2 p-fluid">
                            <label for="active">Dirección</label>
                            <!-- [(ngModel)]="_supplierxprod.description" -->
                            <textarea pInputTextarea rows="1" style="resize: none;" cols="30" pInputTextarea
                                maxlength="100" disabled [(ngModel)]="this.suppliermodal.direction"></textarea>
                        </div>
                        <!-- [(ngModel)]="iDate" (onSelect)="onBlurMethod($event)"-->
                    </div>
                </p-card>
            </div>
    </div>


    <!--  Negociacion y pago -->
    <div class="p-col-12 p-md-6 p-lg-8 p-fluid">
        <div class="card-body my-2">
            <div class="p-grid pb-3">
                <p-card header="Negociación de pago" styleClass="p-card-shadow" class="p-col-12 p-fluid fullheightcard">
                    <div class="p-card-content" style="margin-bottom: -23px;">
                        <div class="p-grid p-align-center vertical-container p-p-3 p-fluid p-formgrid">
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Condición de pago</label>
                                <p-dropdown [options]="paymentConditionList"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || this.suppliermodal.id==-1 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition"
                                    (onChange)="searchPaymentCondition(this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition, true)"
                                    appendTo="body" (keyup.enter)="Save()" placeholder="Seleccione..."
                                    emptyMessage="Sin resultados." [filter]="true" emptyFilterMessage="Sin resultados">
                                </p-dropdown>
                            </div>
                            
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Tipo de descuento</label>
                                <p-dropdown [options]="typeDiscountList"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.paymentsConditions.idDiscountType"
                                    appendTo="body" (keyup.enter)="Save()" placeholder="Seleccione..."
                                    emptyMessage="Sin resultados." [filter]="true" emptyFilterMessage="Sin resultados" [disabled]="true">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Descuento</label>
                                <p-inputNumber
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.paymentsConditions.discount"
                                    [disabled]="this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition==-1 ||this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition>=0 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [minFractionDigits]="4" mode="decimal" min="0" [maxFractionDigits]="4">
                                </p-inputNumber>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Plazo de pago(días)</label>
                                <p-inputNumber
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.paymentsConditions.amounterm"
                                    [disabled]="this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition==-1 || this.PucharseOrderHeader.purchase.paymentsConditions.idPaymentCondition>=0 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [minFractionDigits]="0" mode="decimal" min="0" [maxFractionDigits]="0">
                                </p-inputNumber>
                            </div>

                            <!-- [(ngModel)]="iDate" (onSelect)="onBlurMethod($event)"-->
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Tipo de negociación</label>
                                <p-dropdown [options]="typeNegotiationList"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || this.suppliermodal.id==-1 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.idTypeNegotiation"
                                    emptyMessage="Sin resultados." appendTo="body" (keyup.enter)="Save()"
                                    placeholder="Seleccione..." (onChange)="onChangeTypeNegotiation()">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Tipo moneda <span [ngStyle]="{'color':'red'}">*</span></label>
                                <!-- -->
                                <p-dropdown [options]="coinsTypesList"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || this.suppliermodal.id==-1 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    (onChange)="GetCoins(this.PucharseOrderHeader.purchase.idCurrencyTypeSupplier, true)"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.idCurrencyTypeSupplier"
                                    appendTo="body" emptyMessage="Sin resultados." (keyup.enter)="Save()"
                                    placeholder="Seleccione...">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Moneda de pago <span [ngStyle]="{'color':'red'}">*</span></label>
                                <p-dropdown [options]="currencyListmon"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || this.suppliermodal.id==-1 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    (onChange)="GetWayTopay(this.PucharseOrderHeader.purchase.idCurrencySupplier, true)"
                                    appendTo="body" [(ngModel)]="this.PucharseOrderHeader.purchase.idCurrencySupplier"
                                    (keyup.enter)="Save()" placeholder="Seleccione..." [filter]="true"
                                    emptyFilterMessage="Sin resultados" emptyMessage="Sin resultados.">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Forma de pago <span [ngStyle]="{'color':'red'}">*</span></label>
                                <p-dropdown [options]="waytopayList" appendTo="body"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || this.suppliermodal.id==-1 || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.idPaymentMethod"
                                    (keyup.enter)="Save()" placeholder="Seleccione..." emptyMessage="Sin resultados."
                                    [filter]="true" emptyFilterMessage="Sin resultados"  (onChange)="changEdit()">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Tipo de tasa de pago <span [ngStyle]="{'color':'red'}">*</span></label>
                                <p-dropdown [options]="exchangetypeList"
                                    [disabled]="this.PucharseOrderHeader.purchase.idCurrencySupplier==-1  || PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    (onChange)="searchExchangeRates(this.baseC, this.PucharseOrderHeader.purchase.idCurrencySupplier, this.PucharseOrderHeader.purchase.idRateTypeSupplier, true, true)"
                                    appendTo="body" [(ngModel)]="this.PucharseOrderHeader.purchase.idRateTypeSupplier"
                                    (keyup.enter)="Save()" placeholder="Seleccione..." emptyMessage="Sin resultados.">
                                </p-dropdown>
                            </div>

                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Plan de impuesto</label>
                                <!-- [options]="typeDeliveryList"  -->
                                <p-dropdown [disabled]="true" appendTo="body"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.idTaxPlan" (keyup.enter)="Save()"
                                    placeholder="Seleccione..." emptyMessage="Sin resultados.">
                                </p-dropdown>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid"
                                *ngIf="this.PucharseOrderHeader.purchase.idRateTypeSupplier==3">
                                <label>Valor de tasa <span [ngStyle]="{'color':'red'}">*</span></label>
                                <div class="p-fluid">
                                    <div class="p-inputgroup">
                                        <!-- <p-inputNumber type="text" pInputText placeholder="Tasa"
                                        (keyup.enter)="Save()" [(ngModel)]="this.supplierRate.exchangeRate" disabled> -->
                                        <p-inputNumber [disabled]="true" [(ngModel)]="this.supplierRate.exchangeRate" [ngStyle]="{'width': '100%' }" 
                                            [minFractionDigits]="4" mode="decimal" min="0" [maxFractionDigits]="4">
                                        </p-inputNumber>
                                        <p-button icon="pi pi-plus"
                                            *ngIf="((this.PucharseOrderHeader.purchase.idRateTypeSupplier==3 && this.logueado==this.PucharseOrderHeader.purchase.responsibleId) && (PucharseOrderHeader.purchase.idStatus==statuspurchase.New || this.PucharseOrderHeader.purchase.idStatus==statuspurchase.Eraser))"
                                            [disabled]="this.suppliermodal.id==-1" class="button-radius"
                                            [ngStyle]="{'border-radius:': '4px 0px 0px 4px' }"
                                            (click)="RateSupplierVisible=true"></p-button>
                                        <!-- (click)="OperatorDialogVisible=true" [(ngModel)]="this.operatormodal.namesoperators" -->
                                    </div>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid"
                                *ngIf="this.PucharseOrderHeader.purchase.idRateTypeSupplier!=3">
                                <label>Valor de tasa<span [ngStyle]="{'color':'red'}">*</span></label>
                                <!-- [options]="typeDeliveryList"  -->
                                <p-dropdown [options]="exchangeRateList"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    appendTo="body" (onChange)="ChangeTax()"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.idexchangeRateSupplier"
                                    (keyup.enter)="Save()" placeholder="Seleccione..." emptyMessage="Sin resultados.">
                                </p-dropdown>
                                <!-- <small class="p-invalid" *ngIf="submitted && (this.PucharseOrderHeader.purchase.idexchangeRateSupplier==-1)">La tasa
                                es requerida.</small> -->
                            </div>

                            <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                                <label>Tasa de cambio proveedor <span [ngStyle]="{'color':'red'}">*</span></label>
                                <!-- <div class="p-inputgroup"> -->
                                <p-inputNumber [disabled]="true"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.exchangeRateSupplier"
                                    [minFractionDigits]="4" mode="decimal" min="0" [maxFractionDigits]="4">
                                </p-inputNumber>
                                <small class="p-invalid"
                                    *ngIf="submitted && (this.PucharseOrderHeader.purchase.exchangeRateSupplier==0)">La
                                    tasa
                                    es requerida.</small>
                                <!-- <input type="text" pInputText placeholder="Refrescar"
                                        (keyup.enter)="search()" [(ngModel)]="this.PucharseOrderHeader.exchangeRate" disabled>
                                    <p-button icon="pi pi-plus" class="button-radius" [ngStyle]="{'border-radius:': '4px 0px 0px 4px' }"></p-button> -->
                                <!-- (click)="OperatorDialogVisible=true" [(ngModel)]="this.operatormodal.namesoperators" -->
                                <!-- </div> -->
                            </div>
                            <!-- p-col-12 p-md-6 p-lg-8 p-fluid -->
                            <div class="p-col-12 p-md-6 p-lg-6 p-mb-2 p-fluid">
                                <label for="active">Observación</label>
                                <!-- [(ngModel)]="_supplierxprod.description" -->
                                <textarea pInputTextarea rows="4" style="resize: none;"
                                    [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled || PucharseOrderHeader.purchase.idStatus==statuspurchase.Overdue"
                                    [(ngModel)]="this.PucharseOrderHeader.purchase.supplierObservation" cols="20"
                                    pInputTextarea maxlength="500"></textarea>
                            </div>
                            <div class="p-col-12 p-md-6 p-lg-6 p-mb-2 p-fluid">
                                <label class="p-mr-4" for="binario">Revisión y aprobación del proveedor</label>
                                <p-inputSwitch
                                    [disabled]="PucharseOrderHeader.purchase.idStatus!=statuspurchase.Elaborated"
                                    class="p-mr-4" [(ngModel)]="this.PucharseOrderHeader.purchase.indAproved" (onChange)="changEdit()">
                                </p-inputSwitch>
                            </div>
                        </div>
                    </div>

                </p-card>

            </div>
        </div>
    </div>
    <!--Uso interno-->
    <div class="p-col-12 p-fluid">
        <div class="card-body my-2">
            <div class="p-grid pb-3">
                <p-card class="p-col-12 p-lg-12 p-fluid fullheightcard" header="Uso interno (base de cálculo)"
                    styleClass="p-card-shadow">
                    <div class="p-grid p-align-center vertical-container p-p-3 p-fluid p-formgrid">
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Moneda conversión</label>
                            <p-dropdown [options]="currencyList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idCurrencyConversion" appendTo="body"
                                (keyup.enter)="Save()" placeholder="Moneda conversión" [disabled]="true"
                                emptyMessage="Sin resultados.">
                            </p-dropdown>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Tipo de tasa de cambio</label>
                            <p-dropdown [options]="exchangetypeList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idRateType" [disabled]="true"
                                appendTo="body" (keyup.enter)="Save()" placeholder="Seleccione..."
                                emptyMessage="Sin resultados.">
                            </p-dropdown>
                        </div>
                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Valor de tasa <span [ngStyle]="{'color':'red'}">*</span></label>
                            <p-dropdown [options]="exchangeRateSystemList"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.idexchangeRate" appendTo="body"
                                (keyup.enter)="Save()" placeholder="Seleccione..." emptyMessage="Sin resultados."
                                [disabled]="!indexratechange || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled" (onChange)="ChangerateBaseCal()">
                            </p-dropdown>
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label>Tasa de cambio</label>
                            <!-- <div class="p-inputgroup"> -->
                            <p-inputNumber [disabled]="this.PucharseOrderHeader.purchase.idRateType!=3"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.exchangeRate" [minFractionDigits]="4"
                                mode="decimal" min="0" [maxFractionDigits]="4">
                            </p-inputNumber>
                            <!-- <input type="text" pInputText placeholder="Refrescar"
                                        (keyup.enter)="search()" [(ngModel)]="this.PucharseOrderHeader.exchangeRate" disabled>
                                    <p-button icon="pi pi-plus" class="button-radius" [ngStyle]="{'border-radius:': '4px 0px 0px 4px' }"></p-button> -->
                            <!-- (click)="OperatorDialogVisible=true" [(ngModel)]="this.operatormodal.namesoperators" -->
                            <!-- </div> -->
                        </div>

                        <div class="p-col-12 p-md-6 p-lg-4 p-mb-2 p-fluid">
                            <label class="p-mr-4" for="binario">Base de cálculo moneda base</label>
                            <p-inputSwitch class="p-mr-4"
                                [disabled]="PucharseOrderHeader.purchase.idStatus==statuspurchase.Elaborated || PucharseOrderHeader.purchase.idStatus==statuspurchase.Authorized || PucharseOrderHeader.purchase.idStatus==statuspurchase.Canceled"
                                [(ngModel)]="this.PucharseOrderHeader.purchase.calculationBase" (onChange)="changEdit()" ></p-inputSwitch>
                        </div>

                    </div>
                </p-card>
            </div>
        </div>
    </div>
</div>
<app-modal-operator (onToggle)="onToggleOperator($event)" [operatormodal]="operatormodal"
    [visible]="OperatorDialogVisible" [multiple]="false"></app-modal-operator>
<app-modal-suppliergenerico (onToggle)="onToggleSupplier($event)" [suppliermodal]="suppliermodal"
    (onsupplierchange)="changesupplier()" [visible]="SupplierDialogVisible" [multiple]="false">
</app-modal-suppliergenerico>
<app-modal-contact (onToggle)="onToggleContact($event)" [contactmodal]="contactmodal" [visible]="ContactDialogVisible"
    [(ContactsupplierFilters)]="ContactsupplierFilters"></app-modal-contact>
<app-supplier-rate (onToggle)="onToggleRate($event)" (onAssig)="onAssigRateSupplier()"
    [RatesupplierFilters]="RatesupplierFilters" [visible]="RateSupplierVisible" [supplierRate]="supplierRate">
</app-supplier-rate>
<app-operator (onToggle)="onToggleAuthorizes($event)" [visible]="AuthorizesDialogVisible" [operator]="operator"
    [multiple]="false"></app-operator>

<!-- </p-panel> -->