<div class="p-grid">
  <div class="p-fluid p-col-12 p-md-12 p-lg-12">
    <p-table #dtDc [columns]="displayedColumnsPacking" [value]="packingList"
      [showCurrentPageReport]="true" styleClass="p-datatable-responsive-demo">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <ng-container *ngFor="let col of columns">
            <th [ngStyle]="{'display': col.display }" [pSortableColumn]="col.field">
              {{col.header}}
              <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
          </ng-container>

        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-pointOrder let-columns="columns">
        <tr [pSelectableRow]="pointOrder">
          <ng-container *ngFor="let col of columns">
            <td [ngStyle]="{'display': col.display,'overflow-wrap': 'break-word'}">


              <span>{{col.template(pointOrder)}} </span>

            </td>
          </ng-container>

        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="p-col-12 p-mt-3 p-md-12 p-lg-12">
    <p-fieldset legend="Indicadores" class="fieldseth1">
      <div class="p-grid p-d-flex p-ai-center p-flex-column p-flex-md-row">
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Solicitudes automáticas</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.automaticRequest" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Devolución</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.refund" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Precio marcado</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.markedPrice" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Fecha vencimiento</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.expirationDate" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Maneja recipe</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.manageRecipe" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Redondeo</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.rounding" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
      </div>
      <div class="p-grid p-d-flex p-ai-center p-flex-column p-flex-md-row">
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Guía SADA</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.sadaGuide" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Regulado</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.regulated" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Maneja lote</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.manageBatch" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-col-12 p-md-2 p-lg-2">
          <h6 style="font-weight: normal;">Maneja serial</h6>
          <p-inputSwitch [(ngModel)]="_logisticDataIndicator.manageSerial" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"></p-inputSwitch>
        </div>
        <div class="p-field p-fluid p-col-12 p-md-4 p-lg-4">
          <h6 style="font-weight: normal;">Nivel de sensibilidad</h6>
          <p-dropdown [(ngModel)]="_logisticDataIndicator.sensitivityLevel.id" [options]="_sensitivityLevelOptions" [disabled]="!this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)"
            appendTo="body">
          </p-dropdown>
        </div>
      </div>
    </p-fieldset>
  </div>
  <div class="p-col-12 p-mt-3 p-md-12 p-lg-12">
    <p-fieldset legend="Especificaciones" class="fieldseth1">
        <p-fieldset class="p-mb-2" [legend]="specification.attributeagrupation.name" [toggleable]="true" [collapsed]="true" class="fieldseth" *ngFor="let specification of SpecificationAggrupationList">
            <ul>
                <li *ngFor="let specif of getSpecifications(specification.attributeagrupation.id)" style="display:inline;
                padding-left:1rem;
                padding-right:1rem;">
                    <b>{{specif.attributes.name}}: </b><label *ngFor="let value of getValue(specif.values, specif.attributeTypes.id)">{{value.value}}</label>
                </li>
            </ul>
            <!-- <div class="p-grid">
                <div *ngFor="let specif of SpecificationList">
                    <div class="p-field p-col-4 p-md-4 p-lg-4" *ngIf="specif.attributeagrupation.id == specification.attributeagrupation.id">
                        <b>{{specif.attributes.name}}: </b><label>{{specif.valor}}</label>
                    </div>
                </div>
            </div> -->
        </p-fieldset>
        <div *ngIf="SpecificationAggrupationList.length == 0"><b>Sin información</b></div>
    </p-fieldset>
  </div>
  <div class="p-col-12 p-md-12 p-lg-12" style="text-align: right;" *ngIf="this.userPermissions.allowed(this.permissionsIDs.MANAGE_INDICATORS_LOGISTIC_DATA_SECTION_PERMISSION_ID)">
    <button pButton pRipple label="Guardar" (click)="saveIndicatorsLogisticData()" icon="pi pi-save" class="p-button-info p-mr-2" [disabled]="loading"></button>
  </div>
</div>
